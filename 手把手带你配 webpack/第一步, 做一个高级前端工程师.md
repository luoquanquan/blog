> æ›¾ç», æŸè€é¸Ÿè¯´. åˆ¤æ–­ä¸€ä¸ªå‰ç«¯æ˜¯ä¸æ˜¯çš„æ°´å¹³æ€ä¹ˆæ ·åªéœ€è¦çœ‹ä»–ä¼šä¸ä¼šé… webpack å°±å¯ä»¥äº†. ç„¶å...
![2019-01-20-17-48-44](http://img.blog.niubishanshan.top/2019-01-20-17-48-44.png)
> ä¸€é¡¿æ“ä½œçŒ›å¦‚è™, ç„¶è€Œ "æœ‰çš„æ—¶å€™, ä¸èƒ½ä¸€åœºæ’ä½å°±å®šæ®µå‘€" ----- æˆ‘  å»å¹´   ä¹°äº†ä¸ª

## æ‰“åŒ…å·¥å…·çš„å‰ä¸–ä»Šç”Ÿ

webpack é¡¾åæ€ä¹‰, web åº”ç”¨çš„ pack(æ‰“åŒ…) å·¥å…·. ä¸¾ä¸ªæ —å­, å‡å¦‚ä½ å‡ºé—¨æ—…è¡Œéœ€è¦æºå¸¦å„ç§å„æ ·çš„éšèº«ç‰©å“, æ€ä¹ˆåŠå’§? ä¸€ä¸ªèƒŒåŒ…æå®š. æ‰€æœ‰çš„éšèº«ç‰©å“æ‰“åŒ…åˆ°èƒŒåŒ…é‡Œ, ç®¡ä»–å……ç”µå™¨è¿˜æ˜¯å……ç”µå®, æœè•¾æ–¯è¿˜æ˜¯å†ˆæœ¬å…¨éƒ½ä¸€æ­¥åˆ°ä½...
![2019-01-20-18-01-44](http://img.blog.niubishanshan.top/2019-01-20-18-01-44.png)

æ—©æœŸçš„ web åº”ç”¨ç›¸å¯¹å•è°ƒ, ç½‘é¡µä¸€èˆ¬å°±æ˜¯ä¸‰å¤§ä»¶(html css js)ä¸€æŠŠæ¢­çš„æ’¸, æ‰“åŒ…çš„æ¦‚å¿µæ— éå°±æ˜¯å›¾ç‰‡å‹ä¸€å‹, å„ç§ js æ–‡ä»¶æ‹¼æ¥æˆä¸€ä¸ªæ–‡ä»¶æ¥è§£å†³å•ä¸ªé¡µé¢èµ„æºåŠ è½½çš„æ•°é‡è¿‡å¤šå½±å“ä½“éªŒçš„é—®é¢˜, å½“æ—¶ä¼˜ç§€çš„æ‰“åŒ…å·¥å…·æœ‰ grunt, gulp ç­‰. ä½†éšç€ react, vue ç­‰ä¼˜ç§€ web æ¡†æ¶çš„å‡ºç°æŠŠç»„ä»¶åŒ–å¼€å‘çš„æ€ç»´å¸¦å…¥äº†å‰ç«¯é¢†åŸŸ, web åº”ç”¨ä¸­çš„ä¾èµ–ä¹Ÿè¶‹å‘äºå¤šå…ƒåŒ–, å›¾ç‰‡, å­—ä½“, js è½¬ç , æ ·å¼é¢„å¤„ç†ç­‰ç­‰éœ€æ±‚åº”è¿è€Œç”Ÿ. å•çº¯çš„æ–‡ä»¶æ‹¼æ¥ç•¥æ˜¾ä¹åŠ›äº†.

![2019-01-20-18-40-33](http://img.blog.niubishanshan.top/2019-01-20-18-40-33.png)

è¿™æ˜¯æ—¶å€™, ä½ éœ€è¦ä¸€æ¬¾ä¸“ä¸šçš„å·¥å…·å•¦, é‚£å°±æ˜¯ [webpack](https://webpack.js.org/)

## ç¯å¢ƒæ­å»º

å…‰è¯´ä¸ç»ƒå‡æŠŠå¼, é¦–å…ˆæˆ‘ä»¬å®‰è£… [nodejs](https://nodejs.org/en/), å¦‚æœå¯ä»¥çš„è¯æ¨èä½¿ç”¨æœ€æ–°ç‰ˆæœ¬. å…·ä½“çš„å®‰è£…æ–¹å¼è¯·å‚ç…§[è¿™ç¯‡æ–‡ç« ](https://juejin.im/post/5bfd43986fb9a049ed308f1a)è¯´çš„ç®€ç›´ä¸è¦å¤ªè¯¦ç»†. eslint å»ºè®®ä¹Ÿé…ç½®ä»¥ä¸‹å“ˆ. eslint + vscode çš„ä»£ç è‡ªä¿®å¤èƒ½åŠ›çˆ½åˆ°é£èµ·.

![2019-01-20-20-44-52](http://img.blog.niubishanshan.top/2019-01-20-20-44-52.png)

## æœ¬åœ°(é¡¹ç›®)å®‰è£… webpack

é¡¹ç›®åˆå§‹åŒ–å®Œæˆå, ç›´æ¥å‘½ä»¤è¡Œæ‰§è¡Œ `npm i webpack@3.10.0 -D` å®‰è£… webpack. ç»†å¿ƒçš„åŒå­¦å¯èƒ½å‘ç°äº†webpack å¹¶ä¸æ˜¯å½“ä»Šæœ€é«˜å¤§ä¸Šçš„ webpack4.X ç‰ˆæœ¬, è¿™ä¸ªåŸå› å‘¢å¾ˆç®€å•. å› ä¸º 4.x ç‰ˆæœ¬çš„ webpack æˆ‘
![2019-01-21-10-21-05](http://img.blog.niubishanshan.top/2019-01-21-10-21-05.png)
å½“ç„¶äº†, æˆ‘ä¹Ÿç›¸ä¿¡å¤§å®¶ç†è§£ 3.x çš„ webpack ä»¥å 4.x çš„ä¹Ÿä¼šåˆ†åˆ†é’Ÿæå®š. è¦æ˜¯æä¸å®šå’‹å¼„å’§, æ¥æ‰¾æˆ‘è¡¥ 4.x çš„æ–‡ç« å’¯ ğŸ˜‚

## æ‰§è¡Œç¬¬ä¸€æ¬¡æ‰“åŒ…

ä¸‡é‡Œé•¿åŸç¬¬ä¸€æ­¥, è‚¯å®šæ˜¯è¦åˆå§‹åŒ–é¡¹ç›®ç»“æ„å•¦! æœ¬æ¬¡é¡¹ç›®çš„ç›®å½•ç»“æ„å¦‚ä¸‹å›¾. [ä»£ç åœ°å€](https://github.com/luoquanquan/webpack-show/commit/efd7c6eed19936202fcb385a00bd46e52bcb4d7c)
![2019-01-22-20-36-08](http://img.blog.niubishanshan.top/2019-01-22-20-36-08.png)
å…¶ä¸­, `.eslintignore .eslintrc.js` ä¸º eslint é…ç½®æ–‡ä»¶, `.gitignore` ä¸º git é…ç½®æ–‡ä»¶ `package.json package-lock.json` æ˜¯ npm çš„é…ç½®æ–‡ä»¶

é¦–å…ˆ, æˆ‘ä»¬åˆ›å»ºå¾…å¤„ç†çš„ js æ–‡ä»¶ `index.js` å¹¶ä¸”å†™å…¥å†…å®¹

```js
console.log('æˆ‘æ˜¯é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ~')
```

å…¶æ¬¡, åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹åˆ›å»º webpack é…ç½®æ–‡ä»¶, æ–‡ä»¶åä¸º `webpack.config.js` å¹¶å†™å…¥å†…å®¹

```js
module.exports = {
  // è¿™é‡Œæ˜¯æ‰“åŒ…çš„å…¥å£æ–‡ä»¶ç›¸å¯¹è·¯å¾„
  entry: './index.js',
  output: {
    // æ‰“åŒ…ç»“æœå­˜æ”¾çš„ä½ç½®, å¿…é¡»ç”¨ç»å¯¹è·¯åŠ²
    path: '/Users/quanquanluo/workSpace/quanquan/blog-repo/webpack-show/dist',
    // æ‰“åŒ…ç»“æœæ–‡ä»¶åç§°
    filename: 'bundle.js',
  },
};
```

åˆ°ç°åœ¨, éšèº«ç‰©å“å’ŒèƒŒåŒ…éƒ½å‡†å¤‡å¥½äº†, æˆ‘ä»¬å¼€å§‹æ‰§è¡Œæ‰“åŒ…æ“ä½œ. å‘½ä»¤è¡Œæ‰§è¡Œ `./node_modules/.bin/webpack` (webpack å›è‡ªåŠ¨å¯»æ‰¾é¡¹ç›®ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶), æ­¤æ—¶åœ¨é¡¹ç›®çš„æ ¹ç›®å½•ä¸­æ·»åŠ äº† dist ç›®å½•, dist ç›®å½•ä¸‹åˆ›å»ºäº† bundle.js æ–‡ä»¶. æ–‡ä»¶å†…å®¹å¦‚ä¸‹:

```js
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 0);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports) {

console.log('æˆ‘æ˜¯é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ~');


/***/ })
/******/ ]);
```

å¤©ä¹¦æœ‰ä¹ˆæœ‰?
![2019-01-22-20-50-53](http://img.blog.niubishanshan.top/2019-01-22-20-50-53.png)

ç¨å¾®æ•´ç†äº†ä¸€ä¸‹, å˜æˆäº†ä¸‹é¢çš„æ ·å­

```js
(function(modules) {
 	function __webpack_require__(moduleId) {
 		modules[moduleId]();
 	}
 	return __webpack_require__(0);
})([
    (function() {
        console.log('æˆ‘æ˜¯é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ~');
    })
]);
```

æ¸…ç§€å¤šäº†. æ‰“åŒ…çš„è¿‡ç¨‹å…¶å®å°±æ˜¯æŠŠæ¨¡å—ç”¨ä¸€ä¸ªåŒ¿åè‡ªæ‰§è¡Œå‡½æ•°åŒ…è£¹äº†ä¸€ä¸‹. so esay

![2019-01-22-21-13-03](http://img.blog.niubishanshan.top/2019-01-22-21-13-03.png)

åˆæ¬¡æ‰“åŒ…çš„[ä»£ç åœ°å€](https://github.com/luoquanquan/webpack-show/commit/a5bc1a3790a5ea314ec73068db82ab3fe6a6d6aa). å½“ç„¶å•¦, ä½œä¸ºä¸€ä¸ªæ¸…ç§€çš„å‰ç«¯å·¥ç¨‹å¸ˆ, è‚¯å®šä¸èƒ½å®¹å¿ `/Users/quanquanluo/workSpace/quanquan/blog-repo/webpack-show/dist` è¿™ä¹ˆé•¿çš„ä»£ç , ç¨åŠ æ”¹é€  `webpack.config.js` å¦‚ä¸‹

```js
// å¼•ç”¨ node åŸç”Ÿ path æ¨¡å—å¤„ç†ç»å¯¹è·¯å¾„
const path = require('path');

module.exports = {
  // è¿™é‡Œæ˜¯æ‰“åŒ…çš„å…¥å£æ–‡ä»¶ç›¸å¯¹è·¯å¾„
  entry: './index.js',
  output: {
    // æ‰“åŒ…ç»“æœå­˜æ”¾çš„ä½ç½®, å¿…é¡»ç”¨ç»å¯¹è·¯åŠ²
    path: path.resolve(__dirname, 'dist'),
    // æ‰“åŒ…ç»“æœæ–‡ä»¶åç§°
    filename: 'bundle.js',
  },
};
```

çœ‹ä¸Šå»èˆ’æœå¤šäº†...

## éªŒè¯æ‰“åŒ…åçš„æ–‡ä»¶

æœ€å, æˆ‘ä»¬æ‰§è¡Œ `node dist/bundle.js`, å‘½ä»¤è¡Œä¸­æˆåŠŸæ‰“å°äº† `æˆ‘æ˜¯é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ~` æ‰“åŒ…æˆåŠŸ, æ­å–œå¤§å®¶æˆåŠŸæ™‹çº§ `é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆ`
![2019-01-22-23-54-28](http://img.blog.niubishanshan.top/2019-01-22-23-54-28.png)
ä½†æ˜¯, é¡¹ç›®ç›®å½•ä¸‹ç›´æ¥æ‰§è¡Œ `node index.js`
![2019-01-22-23-45-27](http://img.blog.niubishanshan.top/2019-01-22-23-45-27.png)
å’¦? ç›´æ¥æ‰§è¡Œå°±å¯ä»¥, é‚£æ ·æˆ‘å¿™æ´»åŠå¤©å²‚ä¸æ˜¯è„±äº†è£¤å­æ”¾å±äº†...å“ˆå“ˆå“ˆå“ˆå“ˆ, å½“ç„¶æ²¡æœ‰, ä»ä¸‹ä¸€æ­¥æˆ‘ä»¬å¼€å§‹èµ°å‘çœŸæ­£çš„é«˜çº§å‰ç«¯å·¥ç¨‹å¸ˆä¹‹è·¯. ä¸€èµ·è¿›é˜¶ webpack

![2019-01-22-23-48-27](http://img.blog.niubishanshan.top/2019-01-22-23-48-27.png)









